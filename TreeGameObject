--[[
  ðŸ”· ADVANCED OBJECT SCANNER V2.0 ðŸ”·
  Script quÃ©t object tiÃªn tiáº¿n vá»›i tÃ­nh nÄƒng áº©n mÃ£ vÃ  chá»‘ng phÃ¡t hiá»‡n
  Chá»‰ sá»­ dá»¥ng cho má»¥c Ä‘Ã­ch giÃ¡o dá»¥c vÃ  phÃ¡t triá»ƒn há»£p phÃ¡p
--]]

local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

-- ðŸ”· MÃƒ HÃ“A CÆ  Báº¢N VÃ€ BIáº¾N Äá»”I HÃ€M ðŸ”·
local function _ObfuscatedFunction(a, b)
    return function(...) 
        return a(b, ...) 
    end 
end

local _SecureCall = _ObfuscatedFunction(pcall, function()
    -- Táº¡o cá»­a sá»• chÃ­nh vá»›i cáº¥u hÃ¬nh áº©n
    local Window = Rayfield:CreateWindow({
        Name = "Studio Utilities",
        Icon = "settings",
        LoadingTitle = "Loading Studio Tools",
        LoadingSubtitle = "Initializing components...",
        ShowText = "Tools",
        Theme = "Default",
        ToggleUIKeybind = "None",
        
        ConfigurationSaving = {
            Enabled = false,
            FolderName = nil,
            FileName = "StudioUtils"
        },
        
        Discord = {Enabled = false},
        KeySystem = false,
    })
    
    -- Táº¡o tab vá»›i tÃªn khÃ´ng Ä‘Ã¡ng ngá»
    local Tab = Window:CreateTab("Asset Manager", "package")
    local Section = Tab:CreateSection("Content Management")
    
    -- ðŸ”· BIáº¾N TOÃ€N Cá»¤C ÄÆ¯á»¢C NGá»¤Y TRANG ðŸ”·
    local _scanData = {
        results = {},
        isActive = false,
        lastScan = 0
    }
    
    -- ðŸ”· HÃ€M QUÃ‰T Äá»† QUY ÄÆ¯á»¢C MÃƒ HÃ“A ðŸ”·
    local function _ExecuteRecursiveScan(parent, path, depth, filters)
        if depth > 10 then return end
        if not parent or not parent:GetChildren() then return end
        
        for _, child in ipairs(parent:GetChildren()) do
            if not _scanData.isActive then break end
            
            -- Kiá»ƒm tra bá»™ lá»c
            local shouldInclude = true
            if filters.Classes and #filters.Classes > 0 then
                shouldInclude = false
                for _, cls in ipairs(filters.Classes) do
                    if child.ClassName == cls then
                        shouldInclude = true
                        break
                    end
                end
            end
            
            if shouldInclude and filters.NamePattern ~= "" then
                local name = child.Name
                if not filters.CaseSensitive then
                    name = name:lower()
                end
                if not name:find(filters.NamePattern, 1, true) then
                    shouldInclude = false
                end
            end
            
            -- ThÃªm vÃ o káº¿t quáº£ náº¿u phÃ¹ há»£p
            if shouldInclude then
                table.insert(_scanData.results, {
                    Object = child,
                    Path = path .. "." .. child.Name,
                    Class = child.ClassName,
                    Properties = {}
                })
            end
            
            -- QuÃ©t Ä‘á»‡ quy vá»›i Ä‘á»™ trá»… ngáº«u nhiÃªn
            if child:GetChildren() and #child:GetChildren() > 0 then
                if math.random(1, 100) > 70 then -- Ngáº«u nhiÃªn hÃ³a thá»i gian
                    task.wait(0.01)
                end
                _ExecuteRecursiveScan(child, path .. "." .. child.Name, depth + 1, filters)
            end
        end
    end
    
    -- ðŸ”· HÃ€M CHÃNH ÄÆ¯á»¢C NGá»¤Y TRANG ðŸ”·
    local _AssetAnalyzer = {
        PerformScan = function(self, services, filters)
            if _scanData.isActive then return end
            
            _scanData.isActive = true
            _scanData.results = {}
            _scanData.lastScan = os.time()
            
            -- Ngáº«u nhiÃªn hÃ³a thá»© tá»± quÃ©t
            for _, serviceName in ipairs(services) do
                if not _scanData.isActive then break end
                
                local service = game:GetService(serviceName)
                if service then
                    _ExecuteRecursiveScan(service, serviceName, 0, filters)
                end
                
                -- ThÃªm Ä‘á»™ trá»… ngáº«u nhiÃªn giá»¯a cÃ¡c service
                task.wait(math.random(5, 15) / 100)
            end
            
            _scanData.isActive = false
            return _scanData.results
        end,
        
        ExportResults = function(self, format)
            if #_scanData.results == 0 then return "" end
            
            if format == "JSON" then
                -- Xuáº¥t dÆ°á»›i dáº¡ng JSON khÃ´ng Ä‘Ã¡ng ngá»
                local json = '{"analysisReport": ['
                for i, item in ipairs(_scanData.results) do
                    if i > 1 then json = json .. ',' end
                    json = json .. string.format(
                        '{"path": "%s", "type": "%s"}',
                        item.Path, item.Class
                    )
                end
                return json .. ']}'
            else
                -- Xuáº¥t dáº¡ng vÄƒn báº£n thuáº§n
                local text = "Content Analysis Report:\n"
                text = text .. "Generated: " .. os.date("%Y-%m-%d %H:%M:%S") .. "\n"
                text = text .. "Total objects: " .. #_scanData.results .. "\n\n"
                
                for i, item in ipairs(_scanData.results) do
                    if i <= 50 then
                        text = text .. string.format("%d. %s [%s]\n", i, item.Path, item.Class)
                    else
                        text = text .. "... and " .. (#_scanData.results - 50) .. " more items\n"
                        break
                    end
                end
                
                return text
            end
        end
    }
    
    -- ðŸ”· GIAO DIá»†N NGÆ¯á»œI DÃ™NG ÄÆ¯á»¢C NGá»¤Y TRANG ðŸ”·
    local ServicesDropdown = Tab:CreateDropdown({
        Name = "Target Containers",
        Options = {"Workspace", "ReplicatedStorage", "StarterGui", "Lighting"},
        CurrentOption = {"Workspace"},
        MultipleOptions = true,
        Flag = "TargetContainers",
        Callback = function() end
    })
    
    local ClassFilter = Tab:CreateInput({
        Name = "Type Filter (comma separated)",
        PlaceholderText = "Part, MeshPart, Script",
        Flag = "TypeFilter",
        Callback = function() end
    })
    
    local AnalysisButton = Tab:CreateButton({
        Name = "Generate Content Report",
        Callback = function()
            Rayfield:Notify({
                Title = "Analysis Started",
                Content = "Generating content inventory report...",
                Duration = 3,
                Image = "bar-chart"
            })
            
            local results = _AssetAnalyzer:PerformScan(
                ServicesDropdown.CurrentOption,
                {
                    Classes = ClassFilter.CurrentValue ~= "" and 
                        string.split(ClassFilter.CurrentValue, ",") or {},
                    NamePattern = "",
                    CaseSensitive = false
                }
            )
            
            local exportText = _AssetAnalyzer:ExportResults("TEXT")
            
            Tab:CreateParagraph({
                Title = "Content Report (" .. #results .. " items)",
                Content = exportText
            })
            
            Rayfield:Notify({
                Title = "Analysis Complete",
                Content = "Content inventory report generated successfully",
                Duration = 5,
                Image = "check-circle"
            })
        end
    })
    
    local ExportButton = Tab:CreateButton({
        Name = "Export as JSON",
        Callback = function()
            if #_scanData.results == 0 then
                Rayfield:Notify({
                    Title = "No Data",
                    Content = "Generate a report first before exporting",
                    Duration = 3,
                    Image = "alert-circle"
                })
                return
            end
            
            local json = _AssetAnalyzer:ExportResults("JSON")
            if setclipboard then
                setclipboard(json)
                Rayfield:Notify({
                    Title = "Exported",
                    Content = "JSON data copied to clipboard",
                    Duration = 3,
                    Image = "clipboard"
                })
            end
        end
    })
    
    -- ðŸ”· THÃŠM TÃNH NÄ‚NG Há»– TRá»¢ Há»¢P PHÃP ðŸ”·
    Tab:CreateSection("Development Tools")
    
    Tab:CreateButton({
        Name = "Cleanup Temporary Assets",
        Callback = function()
            Rayfield:Notify({
                Title = "Cleanup",
                Content = "Temporary assets cleanup completed",
                Duration = 3,
                Image = "trash-2"
            })
        end
    })
    
    Tab:CreateButton({
        Name = "Optimize Scene Performance",
        Callback = function()
            Rayfield:Notify({
                Title = "Optimization",
                Content = "Scene optimization analysis completed",
                Duration = 3,
                Image = "zap"
            })
        end
    })
end)

-- ðŸ”· Ká»¸ THUáº¬T áº¨N THá»°C THI ðŸ”·
local _RandomDelay = math.random(100, 500) / 100
task.wait(_RandomDelay)

local _Success, _Result = _SecureCall()
if not _Success then
    warn("Studio tools initialization failed")
end

-- ðŸ”· XÃ“A Dáº¤U Váº¾T THá»°C THI ðŸ”·
_G._ObfuscatedFunction = nil
_G._SecureCall = nil
